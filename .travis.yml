language: bash
sudo: required
services:
  - docker

env:
  - VERSION=1.0.0
  - VERSION=edge
matrix:
  exclude:
    - evn: VERSION=1.0.0 TRAVIS_EVENT_TYPE=cron
  allow_failures:
    - env: VERSION=edge

script:
  - ./build versions/$VERSION/options
  - ./build test versions/$VERSION/options

deploy:
  - provider: script
    script: docker login -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD" && ./build push versions/$VERSION/options
    on:
      branch: master
